<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Core Keeper Server</title>
    <style>
        body {
            background-color: #1c1c1e;
            color: #f5f5f7;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 2rem;
            line-height: 1.6;
        }

        h1 {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: #ffcc00;
            letter-spacing: 1px;
        }

        .container {
            max-width: 800px;
            margin: 1.5rem 0 auto;
            background-color: #2c2c2e;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.05);
        }

        pre {
            background-color: #3a3a3c;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            white-space: pre-wrap;
            font-size: 1rem;
            font-family: 'Courier New', Courier, monospace;
            color: #e6e6e6;
        }

        .status-indicator {
            display: inline-block;
            padding: 0.3em 0.75em;
	    font-size: 0.9rem;
	    font-weight: bold;
	    border-radius: 6px;
	    margin-left: 0.5rem;
	}

	.status-green {
	    background-color: #2ecc71;
	    color: #fff;
	}

	.status-yellow {
	    background-color: #f1c40f;
	    color: #000;
	}

	.status-red {
	    background-color: #e74c3c;
	    color: #fff;
	}

	details summary {
	    cursor: pointer;
	    font-weight: bold;
	    padding: 0.5rem 0;
	}

	details[open] summary::after {
	    content: " ‚ñ≤";
	}

        summary::after {
            content: " ‚ñº";
        }
    </style>
</head>
<body>
    <h1>Core Keeper Server</h1>
    <div class="container">
        <h2>Game ID</h2>
        <?php
        $gameID = "/home/corekeeper-server/GameID.txt";
        if (file_exists($gameID)) {
            echo "<pre>" . htmlspecialchars(file_get_contents($gameID)) . "</pre>";
        } else {
            echo "<pre>Game ID not available.</pre>";
        }
        ?>
    </div>

    <div class="container">
        <h2>Update Status
        <?php
        $filename = "/var/www/html/update-status.txt";
        if (file_exists($filename)) {
	    $statusText = trim(file_get_contents($filename))
	    if (stripos($statusText, 'up to date') !== false) {
		echo '<span class="status-indicator status-green">Up to Date</span>';
	    } elseif (stripos($statusText, 'pending') !== false || stripos($statusText, 'available') !== false {
		echo '<span class="status-indicator status-yellow">Update Available</span>';
	    } else {
		echo '<span class="status-indicator status-red">Error</span>';
	    }
	    echo "</h2><pre>" . htmlspecialchars($statusText) . "</pre>";
        } else {
	    echo '</h2><span class="status-indicator status-red">Unavailable</span>';
            echo "<pre>No server information available. Please create a file named 'update-status.txt'.</pre>";
        }
        ?>
    </div>

    <div class="container">
        <h2>üõ†Ô∏è Service Status</h2>
        <details>
            <summary>Show systemd service logs</summary>
            <?php
            $statusFile = "/var/www/html/service-status.txt";
            if (file_exists($statusFile)) {
                echo "<pre>" . htmlspecialchars(file_get_contents($statusFile)) . "</pre>";
            } else {
                echo "<pre>No service-status.txt found.</pre>";
            }
            ?>
        </details>
    </div>
</body>
</html>
